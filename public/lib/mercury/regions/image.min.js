(function(){var n,t={}.hasOwnProperty,i=function(n,i){function e(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return e.prototype=i.prototype,n.prototype=new e,n.__super__=i.prototype,n};Mercury.Region.Image=function(t){function e(){return n=e.__super__.constructor.apply(this,arguments)}return i(e,t),e.define("Mercury.Region.Image","image"),e.include(Mercury.Region.Modules.DropIndicator),e.include(Mercury.Region.Modules.DropItem),e.supported=!0,e.tag="img",e.events={mousedown:"onMousedown"},e.prototype.value=function(n){return null===n||"undefined"==typeof n?this.attr("src"):this.attr("src",n)},e.prototype.onMousedown=function(n){return this.prevent(n),this.$el.trigger("focus")},e.prototype.onDropFile=function(n){var t,i=this;return t=new(Mercury[this.config("interface:uploader")])(n,{mimeTypes:this.options.mimeTypes}),t.on("uploaded",function(n){return i.focus(),i.handleAction("file",n)})},e}(Mercury.Region),Mercury.Region.Image.addToolbar({general:{crop:["Crop Image"],resize:["Resize Image"]},alignment:{alignLeft:["Align Left"],alignRight:["Align Right"],alignTop:["Align Top"],alignMiddle:["Align Middle"],alignBottom:["Align Bottom"],alignNone:["Align None"]}}),Mercury.Region.Image.addData({align:function(n){return this.attr({align:n}),Mercury.trigger("resize")}}),Mercury.Region.Image.addAction({alignLeft:function(){return this.data({align:"left"})},alignRight:function(){return this.data({align:"right"})},alignTop:function(){return this.data({align:"top"})},alignMiddle:function(){return this.data({align:"middle"})},alignBottom:function(){return this.data({align:"bottom"})},alignNone:function(){return this.data({align:null})},file:function(n){return n.isImage()?this.handleAction("image",{url:n.get("url")}):void 0},image:function(n){return this.value(n.get("url"))}}),Mercury.Region.Image.addContext({alignLeft:function(){return"left"===this.data("align")},alignRight:function(){return"right"===this.data("align")},alignTop:function(){return"top"===this.data("align")},alignMiddle:function(){return"middle"===this.data("align")},alignBottom:function(){return"bottom"===this.data("align")},alignNone:function(){return!this.data("align")}})}).call(this);