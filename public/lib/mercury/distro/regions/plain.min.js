(function(){var e={}.hasOwnProperty,t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t};Mercury.Region.Plain=function(e){function n(){var e;try{window.rangy.init()}catch(t){return e=t,this.notify(this.t("requires Rangy")),!1}n.__super__.constructor.apply(this,arguments),this.options.allowActs===!1&&(this.actions=!1)}return t(n,e),n.define("Mercury.Region.Plain","plain"),n.include(Mercury.Region.Modules.HtmlSelection),n.include(Mercury.Region.Modules.SelectionValue),n.include(Mercury.Region.Modules.ContentEditable),n.supported=Mercury.support.wysiwyg,n.events={keydown:"onKeyEvent",paste:"onPaste"},n.prototype.onDropItem=function(e){return this.prevent(e)},n.prototype.onPaste=function(e){return this.prevent(e),this.insertContent(e.originalEvent.clipboardData.getData("text/plain"))},n.prototype.insertContent=function(e){return e=this.options.newlines?e.replace("\n","<br>"):e.replace("\n"," "),document.execCommand("insertHTML",null,e||" ")},n.prototype.onKeyEvent=function(e){if(!(e.keyCode>=37&&e.keyCode<=40||e.metaKey&&90===e.keyCode)){if(13===e.keyCode&&!this.options.newlines)return this.prevent(e);if(e.metaKey)switch(e.keyCode){case 66:return this.prevent(e),this.handleAction("bold");case 73:return this.prevent(e),this.handleAction("italic");case 85:return this.prevent(e),this.handleAction("underline")}return this.pushHistory(e.keyCode)}},n}(Mercury.Region),Mercury.Region.Plain.addToolbar({decoration:{bold:["Bold"],italic:["Italicize"],underline:["Underline"]}}),Mercury.Region.Plain.addAction({bold:function(){return this.toggleWrapSelectedWordsInClass("red")},italic:function(){return this.toggleWrapSelectedWordsInClass("highlight")},underline:function(){return this.toggleWrapSelectedWordsInClass("blue")}})}).call(this);