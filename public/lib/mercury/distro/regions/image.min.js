(function(){var n={}.hasOwnProperty,t=function(t,i){function e(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return e.prototype=i.prototype,t.prototype=new e,t.__super__=i.prototype,t};Mercury.Region.Image=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.define("Mercury.Region.Image","image"),i.include(Mercury.Region.Modules.DropIndicator),i.include(Mercury.Region.Modules.DropItem),i.supported=!0,i.tag="img",i.events={mousedown:"onMousedown"},i.prototype.value=function(n){return null===n||"undefined"==typeof n?this.attr("src"):this.attr("src",n)},i.prototype.onMousedown=function(n){return this.prevent(n),this.$el.trigger("focus")},i.prototype.onDropFile=function(n){var t;return t=new(Mercury[this.config("interface:uploader")])(n,{mimeTypes:this.options.mimeTypes}),t.on("uploaded",function(n){return function(t){return n.focus(),n.handleAction("file",t)}}(this))},i}(Mercury.Region),Mercury.Region.Image.addToolbar({general:{crop:["Crop Image"],resize:["Resize Image"]},alignment:{alignLeft:["Align Left"],alignRight:["Align Right"],alignTop:["Align Top"],alignMiddle:["Align Middle"],alignBottom:["Align Bottom"],alignNone:["Align None"]}}),Mercury.Region.Image.addData({align:function(n){return this.attr({align:n}),Mercury.trigger("resize")}}),Mercury.Region.Image.addAction({alignLeft:function(){return this.data({align:"left"})},alignRight:function(){return this.data({align:"right"})},alignTop:function(){return this.data({align:"top"})},alignMiddle:function(){return this.data({align:"middle"})},alignBottom:function(){return this.data({align:"bottom"})},alignNone:function(){return this.data({align:null})},file:function(n){return n.isImage()?this.handleAction("image",{url:n.get("url")}):void 0},image:function(n){return this.value(n.get("url"))}}),Mercury.Region.Image.addContext({alignLeft:function(){return"left"===this.data("align")},alignRight:function(){return"right"===this.data("align")},alignTop:function(){return"top"===this.data("align")},alignMiddle:function(){return"middle"===this.data("align")},alignBottom:function(){return"bottom"===this.data("align")},alignNone:function(){return!this.data("align")}})}).call(this);